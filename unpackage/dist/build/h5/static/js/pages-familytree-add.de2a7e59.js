(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-familytree-add"],{"07ad":function(t,a,e){"use strict";e.r(a);var n=e("ce52"),r=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=r.a},7757:function(t,a,e){"use strict";e.d(a,"b",(function(){return r})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return n}));var n={uniForms:e("8d1e").default,uniFormsItem:e("e076").default,uniEasyinput:e("aad2").default,uniDataCheckbox:e("3cfc").default,uniFilePicker:e("ea53").default},r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"uni-container"},[e("uni-forms",{ref:"form",attrs:{value:t.formData,validateTrigger:"bind"}},[e("uni-forms-item",{attrs:{name:"name",label:"姓名",required:!0}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}})],1),e("uni-forms-item",{attrs:{name:"parent_id",label:"父节点"}},[e("uni-easyinput",{attrs:{placeholder:"父id。不支持继父。可表示配偶"},model:{value:t.formData.parent_id,callback:function(a){t.$set(t.formData,"parent_id",a)},expression:"formData.parent_id"}})],1),e("uni-forms-item",{attrs:{name:"parent_relationship",label:"与父节点的关系"}},[e("uni-data-checkbox",{attrs:{disable:"true",localdata:t.formOptions.parent_relationship_localdata},model:{value:t.formData.parent_relationship,callback:function(a){t.$set(t.formData,"parent_relationship",a)},expression:"formData.parent_relationship"}})],1),e("uni-forms-item",{attrs:{name:"parent_partner_id",label:""}},[e("uni-easyinput",{attrs:{placeholder:"母id。如果parent是女性，则本字段代表父亲"},model:{value:t.formData.parent_partner_id,callback:function(a){t.$set(t.formData,"parent_partner_id",a)},expression:"formData.parent_partner_id"}})],1),e("uni-forms-item",{attrs:{name:"gender",label:"性别"}},[e("uni-data-checkbox",{attrs:{localdata:t.formOptions.gender_localdata},model:{value:t.formData.gender,callback:function(a){t.$set(t.formData,"gender",a)},expression:"formData.gender"}})],1),e("uni-forms-item",{attrs:{name:"birthyear",label:"出生年份"}},[e("uni-easyinput",{attrs:{type:"number"},model:{value:t.formData.birthyear,callback:function(a){t.$set(t.formData,"birthyear",a)},expression:"formData.birthyear"}})],1),e("uni-forms-item",{attrs:{name:"dieyear",label:"死亡年份"}},[e("uni-easyinput",{attrs:{type:"number"},model:{value:t.formData.dieyear,callback:function(a){t.$set(t.formData,"dieyear",a)},expression:"formData.dieyear"}})],1),e("uni-forms-item",{attrs:{name:"birthlocation",label:"出生地点"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.birthlocation,callback:function(a){t.$set(t.formData,"birthlocation",a)},expression:"formData.birthlocation"}})],1),e("uni-forms-item",{attrs:{name:"finallocation",label:"最后地点"}},[e("uni-easyinput",{attrs:{placeholder:"未亡人填写现居住地",trim:"both"},model:{value:t.formData.finallocation,callback:function(a){t.$set(t.formData,"finallocation",a)},expression:"formData.finallocation"}})],1),e("uni-forms-item",{attrs:{name:"idcard",label:"身份证号"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.idcard,callback:function(a){t.$set(t.formData,"idcard",a)},expression:"formData.idcard"}})],1),e("uni-forms-item",{attrs:{name:"nation",label:"民族"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.nation,callback:function(a){t.$set(t.formData,"nation",a)},expression:"formData.nation"}})],1),e("uni-forms-item",{attrs:{name:"policital_status",label:"政治面貌"}},[e("uni-data-checkbox",{attrs:{localdata:t.formOptions.policital_status_localdata},model:{value:t.formData.policital_status,callback:function(a){t.$set(t.formData,"policital_status",a)},expression:"formData.policital_status"}})],1),e("uni-forms-item",{attrs:{name:"school",label:"毕业学校"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.school,callback:function(a){t.$set(t.formData,"school",a)},expression:"formData.school"}})],1),e("uni-forms-item",{attrs:{name:"education",label:"学历"}},[e("uni-data-checkbox",{attrs:{localdata:t.formOptions.education_localdata},model:{value:t.formData.education,callback:function(a){t.$set(t.formData,"education",a)},expression:"formData.education"}})],1),e("uni-forms-item",{attrs:{name:"professional_title",label:"职称"}},[e("uni-data-checkbox",{attrs:{localdata:t.formOptions.professional_title_localdata},model:{value:t.formData.professional_title,callback:function(a){t.$set(t.formData,"professional_title",a)},expression:"formData.professional_title"}})],1),e("uni-forms-item",{attrs:{name:"company",label:"工作单位"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.company,callback:function(a){t.$set(t.formData,"company",a)},expression:"formData.company"}})],1),e("uni-forms-item",{attrs:{name:"worktitle",label:"职务"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:t.formData.worktitle,callback:function(a){t.$set(t.formData,"worktitle",a)},expression:"formData.worktitle"}})],1),e("uni-forms-item",{attrs:{name:"resume",label:"简历"}},[e("v-uni-textarea",{staticClass:"uni-textarea-border",attrs:{value:t.formData.resume,trim:"both"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.binddata("resume",a.detail.value)}}})],1),e("uni-forms-item",{attrs:{name:"photo_person",label:"个人照片"}},[e("uni-file-picker",{attrs:{"file-mediatype":"image","file-extname":t.jpg,"return-type":"object"},model:{value:t.formData.photo_person,callback:function(a){t.$set(t.formData,"photo_person",a)},expression:"formData.photo_person"}})],1),e("uni-forms-item",{attrs:{name:"photo_family",label:"家庭照片"}},[e("uni-file-picker",{attrs:{"file-mediatype":"image","file-extname":t.jpg,png:t.png,"return-type":"object"},model:{value:t.formData.photo_family,callback:function(a){t.$set(t.formData,"photo_family",a)},expression:"formData.photo_family"}})],1),e("uni-forms-item",{attrs:{name:"comment",label:"备注"}},[e("v-uni-textarea",{staticClass:"uni-textarea-border",attrs:{value:t.formData.comment,trim:"both"},on:{input:function(a){arguments[0]=a=t.$handleEvent(a),t.binddata("comment",a.detail.value)}}})],1),e("v-uni-view",{staticClass:"uni-button-group"},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.submit.apply(void 0,arguments)}}},[t._v("提交")]),e("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[t._v("返回")])],1)],1)],1)],1)},o=[]},"77aa":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.enumConverter=a.validator=void 0;var n={nation:{rules:[{format:"string"}],defaultValue:"汉族",label:"民族"},name:{rules:[{required:!0},{format:"string"},{minLength:2}],label:"姓名"},parent_id:{rules:[{format:"string"}],label:"父节点"},parent_relationship:{rules:[{format:"string"},{range:[{text:"子女",value:"parent"},{text:"配偶",value:"partner"}]}],label:"与父节点的关系"},parent_partner_id:{rules:[{format:"string"}]},gender:{rules:[{format:"int"},{range:[{text:"男",value:1},{text:"女",value:2}]}],defaultValue:1,label:"性别"},birthyear:{rules:[{format:"int"}],label:"出生年份"},dieyear:{rules:[{format:"int"}],label:"死亡年份"},birthlocation:{rules:[{format:"string"}],label:"出生地点"},finallocation:{rules:[{format:"string"}],label:"最后地点"},idcard:{rules:[{format:"string"},{format:"idcard"}],label:"身份证号"},policital_status:{rules:[{format:"string"},{range:[{text:"群众",value:"群众"},{text:"党员",value:"党员"}]}],defaultValue:"群众",label:"政治面貌"},school:{rules:[{format:"string"}],label:"毕业学校"},education:{rules:[{format:"string"},{range:[{text:"博士后",value:"博士后"},{text:"博士",value:"博士"},{text:"硕士",value:"硕士"},{text:"本科",value:"本科"},{text:"大专",value:"大专"},{text:"高中",value:"高中"},{text:"中专",value:"中专"},{text:"初中",value:"初中"},{text:"小学",value:"小学"},{text:"无",value:"无"}]}],label:"学历"},professional_title:{rules:[{format:"string"},{range:[{value:"无",text:"无"},{value:"正高级",text:"正高级"},{value:"副高级",text:"副高级"},{value:"中级",text:"中级"},{value:"初级",text:"初级"}]}],label:"职称"},company:{rules:[{format:"string"}],label:"工作单位"},worktitle:{rules:[{format:"string"}],label:"职务"},resume:{rules:[{format:"string"}],label:"简历"},photo_person:{rules:[{format:"file"}],label:"个人照片"},photo_family:{rules:[{format:"file"}],label:"家庭照片"},comment:{rules:[{format:"string"}],label:"备注"}};a.validator=n;var r={parent_relationship_valuetotext:{parent:"子女",partner:"配偶"},gender_valuetotext:{1:"男",2:"女"},policital_status_valuetotext:{"群众":"群众","党员":"党员"},education_valuetotext:{"博士后":"博士后","博士":"博士","硕士":"硕士","本科":"本科","大专":"大专","高中":"高中","中专":"中专","初中":"初中","小学":"小学","无":"无"},professional_title_valuetotext:{"无":"无","正高级":"正高级","副高级":"副高级","中级":"中级","初级":"初级"}};a.enumConverter=r},"8ccb":function(t,a,e){"use strict";e.r(a);var n=e("7757"),r=e("07ad");for(var o in r)"default"!==o&&function(t){e.d(a,t,(function(){return r[t]}))}(o);var i,l=e("f0c5"),s=Object(l["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);a["default"]=s.exports},ce52:function(t,a,e){"use strict";(function(t){var n=e("4ea4");e("caad"),e("d3b7"),e("2532"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(e("5530")),o=e("77aa"),i=t.database(),l=(i.command,"familytree");function s(t){var a={};for(var e in o.validator)t.includes(e)&&(a[e]=o.validator[e]);return a}var u={data:function(){return{formData:{nation:"汉族",name:"",parent_id:"",parent_relationship:"",parent_partner_id:"",gender:1,birthyear:null,dieyear:null,birthlocation:"",finallocation:"",idcard:"",policital_status:"群众",school:"",education:"",professional_title:"",company:"",worktitle:"",resume:"",photo_person:null,photo_family:null,comment:""},formOptions:{parent_relationship_localdata:[{text:"子女",value:"parent"},{text:"配偶",value:"partner"}],gender_localdata:[{text:"男",value:1},{text:"女",value:2}],policital_status_localdata:[{text:"群众",value:"群众"},{text:"党员",value:"党员"}],education_localdata:[{text:"博士后",value:"博士后"},{text:"博士",value:"博士"},{text:"硕士",value:"硕士"},{text:"本科",value:"本科"},{text:"大专",value:"大专"},{text:"高中",value:"高中"},{text:"中专",value:"中专"},{text:"初中",value:"初中"},{text:"小学",value:"小学"},{text:"无",value:"无"}],professional_title_localdata:[{value:"无",text:"无"},{value:"正高级",text:"正高级"},{value:"副高级",text:"副高级"},{value:"中级",text:"中级"},{value:"初级",text:"初级"}]},rules:(0,r.default)({},s(["name","idcard","parent_id","parent_relationship","parent_partner_id","gender","birthyear","dieyear","birthlocation","finallocation","nation","policital_status","school","education","professional_title","company","worktitle","resume","photo_person","photo_family","comment"]))}},onLoad:function(t){t.parent_id&&(this.formData.parent_id=t.parent_id,this.formData.parent_relationship=t.parent_relationship,this.parent_name=t.parent_name)},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var t=this;uni.showLoading({mask:!0}),this.$refs.form.submit().then((function(a){t.submitForm(a)})).catch((function(t){uni.hideLoading()}))},submitForm:function(t){var a=this;i.collection(l).add(t).then((function(t){uni.showToast({title:"新增成功"}),a.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};a.default=u}).call(this,e("a9ff")["default"])}}]);